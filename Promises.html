<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Promises in JS</title>
</head>
<body>
    <h1>Good Morning</h1>
    <script>
        let h1=document.querySelector("h1");

        function changeColor(color, delay){
            return new Promise((resolve,reject)=>{
                setTimeout(()=>{
                    h1.style.color=color;
                    resolve("color changed!");
                },delay)
            });
        }

        changeColor("red",1000)
            .then(()=>{
                console.log("red color was completed");
                return changeColor("orange",1000);
            })
            .then(()=>{
                console.log("orange color was completed");
                return changeColor("green",1000);
            })
            .then(()=>{
                console.log("green color was completed");
                return changeColor("blue",1000);
            })
            .then(()=>{
                console.log("blue color was completed");
            });

         function savetoDb(data){
            return new Promise((resolve,reject)=>{
                let internetSpeed=Math.floor(Math.random()*10)+1;
                if(internetSpeed>4){
                    resolve("success:data was saved");
                }else{
                    reject("failure:weak connection");
                }
            });
         }   
        
         savetoDb("My Portal")
           .then((result)=>{
             console.log("data1 saved");
             console.log("result of promise:",result);
             return savetoDb("Hello World");
           })
           .then((result)=>{
            console.log("data2 saved");
            console.log("result of promise:",result);
            return savetoDb("Vinit");
          })
          .then((result)=>{
            console.log("data3 saved");
            console.log("result of promise:",result);
            
          })
          .catch((error)=>{
            console.log("promise was rejected");
            console.log("error of promise:",error);
          });
          
    </script>
</body>
</html>